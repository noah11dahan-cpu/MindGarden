:8080 {

  # --- API mounted under /api ---
  handle_path /api/* {
    reverse_proxy api:8001
  }

  # Swagger UI (FastAPI uses absolute URLs)
  handle /openapi.json {
    reverse_proxy api:8001
  }
  handle /docs* {
    reverse_proxy api:8001
  }
  handle /redoc* {
    reverse_proxy api:8001
  }

  # --- Everything else goes to the frontend ---
  handle {
    reverse_proxy frontend:5173
  }
}
